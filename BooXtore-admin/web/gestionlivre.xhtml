<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="index.xhtml"
                xmlns:f="http://java.sun.com/jsf/core">
    <ui:define name="content">
        <h:form id="form">
            <p:contextMenu for="livres">
                <p:menuitem value="Modifier" update="display" oncomplete="livreDialog.show()"/>
                <p:menuitem value="Supprimer" oncomplete="confirmation.show()"/>
            </p:contextMenu>
            <p:dataTable id="livres" var="livre" value="#{GestionLivreBean.allLivres}" selection="#{GestionLivreBean.livreModifie}" rowKey="#{livre.idLivre}" selectionMode="single">
                <f:facet name="header">
                    Liste Livres
                </f:facet>
                <p:column headerText="ID">
                    <h:outputText value="#{livre.idLivre}" />
                </p:column>
                <p:column headerText="Nom">
                    <h:outputText value="#{livre.titre}" />
                </p:column>
                <p:column headerText="Date de parution">
                    <h:outputText value="#{livre.dateParution}" >
                        <f:convertDateTime type="date" pattern="dd/MM/yyyy"/>
                    </h:outputText>
                </p:column>
                <p:column headerText="Auteur">
                    <h:outputText value="#{livre.auteur}" />
                </p:column>
                <p:column headerText="Editeur">
                    <h:outputText value="#{livre.editeur}" />
                </p:column>
                <p:column headerText="Resume">
                    <h:outputText value="#{livre.resume}" />
                </p:column>
                <p:column headerText="Sommaire">
                    <h:outputText value="#{livre.sommaire}" />
                </p:column>
                <p:column headerText="Prix">
                    <h:outputText value="#{livre.prix}" >
                        <f:convertNumber type="currency" currencySymbol="€"/>
                    </h:outputText>
                </p:column>
            </p:dataTable>
            <p:dialog header="Livre" widgetVar="livreDialog" resizable="true" showEffect="clip" hideEffect="fold" id="dialog">
                <h:panelGrid id="display" columns="2" cellpadding="2">
                    <h:outputLabel for="id" value="ID :" />
                    <h:outputText id="id" value="#{GestionLivreBean.livreModifie.idLivre}" />
                    <h:outputLabel for="titre" value="Titre :" />
                    <h:inputText id="titre" value="#{GestionLivreBean.titre}" />
                    <h:outputLabel for="date" value="Date de parution :" />
                    <p:calendar id="date" value="#{GestionLivreBean.dateDeParution}" effect="slideDown" />
                    <h:outputLabel for="auteur" value="Auteur :" />
                    <h:inputText id="auteur" value="#{GestionLivreBean.auteur}" />
                    <h:outputLabel for="editeur" value="Editeur :" />
                    <h:inputText id="editeur" value="#{GestionLivreBean.editeur}" />
                    <h:outputLabel for="resume" value="Résumé :" />
                    <p:inputTextarea id="resume" value="#{GestionLivreBean.resume}" rows="3" cols="100" maxlength="10000" autoResize="false"/>
                    <h:outputLabel for="sommaire" value="Sommaire :" />
                    <p:inputTextarea id="sommaire" value="#{GestionLivreBean.sommaire}" rows="3" cols="100" maxlength="10000" autoResize="false"/>
                    <h:outputLabel for="prix" value="Prix :" />
                    <h:inputText id="prix" value="#{GestionLivreBean.prix}" />
                    <p:commandButton id="btn" value="Enregistrer" update="display" actionListener="#{GestionLivreBean.modifierLivre(actionEvent)}"/>
                </h:panelGrid>
            </p:dialog>
            <p:dialog id="confirmDialog" header="Confirmation de suppression" widgetVar="confirmation">
                <p:commandButton id="confirm" value="Oui" actionListener="#{GestionLivreBean.supprimerLivre()}" />
                <p:commandButton id="decline" value="Non" onclick="confirmation.hide()" />
            </p:dialog>
        </h:form>
    </ui:define>
</ui:composition>